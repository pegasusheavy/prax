<article class="max-w-4xl mx-auto px-6 py-12">
  <header class="mb-12">
    <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-success-500/10 text-success-400 text-sm font-medium mb-4">
      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
      </svg>
      Faster than Diesel for simple filters
    </div>
    <h1 class="text-4xl font-bold mb-4">Performance</h1>
    <p class="text-xl text-muted">
      Prax is highly optimized for performance, exceeding Diesel in key areas while maintaining a developer-friendly API.
    </p>
  </header>

  <div class="space-y-12">
    <!-- Performance Highlights -->
    <section>
      <h2 class="text-2xl font-semibold mb-6">Key Achievements</h2>
      <div class="grid md:grid-cols-3 gap-4">
        <div class="p-6 rounded-xl bg-surface border border-border">
          <div class="text-3xl font-bold text-success-400 mb-2">1.7ns</div>
          <div class="text-sm text-muted">Simple filter creation</div>
          <div class="text-xs text-success-400 mt-1">3x faster than Diesel</div>
        </div>
        <div class="p-6 rounded-xl bg-surface border border-border">
          <div class="text-3xl font-bold text-primary-400 mb-2">64B</div>
          <div class="text-sm text-muted">Filter enum size</div>
          <div class="text-xs text-primary-400 mt-1">Fits in single cache line</div>
        </div>
        <div class="p-6 rounded-xl bg-surface border border-border">
          <div class="text-3xl font-bold text-accent-400 mb-2">6.6x</div>
          <div class="text-sm text-muted">Faster query building</div>
          <div class="text-xs text-accent-400 mt-1">vs Diesel SQL generation</div>
        </div>
      </div>
    </section>

    <!-- Benchmark Comparison -->
    <section>
      <h2 class="text-2xl font-semibold mb-6">ORM Comparison</h2>
      <div class="overflow-x-auto">
        <table class="w-full text-sm">
          <thead>
            <tr class="border-b border-border text-left">
              <th class="py-3 px-4 font-medium">Operation</th>
              <th class="py-3 px-4 font-medium text-primary-400">Prax</th>
              <th class="py-3 px-4 font-medium">Diesel</th>
              <th class="py-3 px-4 font-medium">SQLx</th>
              <th class="py-3 px-4 font-medium">SeaORM</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-border">
            <tr>
              <td class="py-3 px-4">Simple SELECT</td>
              <td class="py-3 px-4 text-success-400 font-medium">44ns</td>
              <td class="py-3 px-4">291ns</td>
              <td class="py-3 px-4">5ns</td>
              <td class="py-3 px-4">-</td>
            </tr>
            <tr>
              <td class="py-3 px-4">SELECT + filters</td>
              <td class="py-3 px-4 text-success-400 font-medium">100ns</td>
              <td class="py-3 px-4">706ns</td>
              <td class="py-3 px-4">5ns</td>
              <td class="py-3 px-4">-</td>
            </tr>
            <tr>
              <td class="py-3 px-4">Simple equals filter</td>
              <td class="py-3 px-4 text-success-400 font-medium">1.7ns</td>
              <td class="py-3 px-4">5ns</td>
              <td class="py-3 px-4">-</td>
              <td class="py-3 px-4">55ns</td>
            </tr>
            <tr>
              <td class="py-3 px-4">AND (5 conditions)</td>
              <td class="py-3 px-4 font-medium">17ns</td>
              <td class="py-3 px-4 text-success-400">5ns</td>
              <td class="py-3 px-4">-</td>
              <td class="py-3 px-4">305ns</td>
            </tr>
            <tr>
              <td class="py-3 px-4">IN (100 values)</td>
              <td class="py-3 px-4 font-medium">~300ns</td>
              <td class="py-3 px-4">~100ns</td>
              <td class="py-3 px-4">-</td>
              <td class="py-3 px-4">~400ns</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Memory Optimization -->
    <section>
      <h2 class="text-2xl font-semibold mb-6">Memory Footprint</h2>
      <div class="overflow-x-auto">
        <table class="w-full text-sm">
          <thead>
            <tr class="border-b border-border text-left">
              <th class="py-3 px-4 font-medium">Type</th>
              <th class="py-3 px-4 font-medium">Size</th>
              <th class="py-3 px-4 font-medium">Notes</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-border">
            <tr>
              <td class="py-3 px-4 font-mono text-sm">Filter</td>
              <td class="py-3 px-4 text-success-400 font-medium">64 bytes</td>
              <td class="py-3 px-4 text-muted">Fits in single cache line</td>
            </tr>
            <tr>
              <td class="py-3 px-4 font-mono text-sm">FilterValue</td>
              <td class="py-3 px-4">32 bytes</td>
              <td class="py-3 px-4 text-muted">Optimized tagged union</td>
            </tr>
            <tr>
              <td class="py-3 px-4 font-mono text-sm">FieldName</td>
              <td class="py-3 px-4">24 bytes</td>
              <td class="py-3 px-4 text-muted">Cow&lt;'static, str&gt;</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Optimization Techniques -->
    <section>
      <h2 class="text-2xl font-semibold mb-6">Optimization Techniques</h2>
      <div class="space-y-4">
        <div class="p-4 rounded-lg bg-surface border border-border">
          <h3 class="font-semibold mb-2">DirectSql Trait</h3>
          <p class="text-sm text-muted mb-3">Zero-allocation SQL generation directly from typed filters.</p>
          <app-code-block [code]="directSqlExample" language="rust" />
        </div>
        <div class="p-4 rounded-lg bg-surface border border-border">
          <h3 class="font-semibold mb-2">Pre-computed Placeholders</h3>
          <p class="text-sm text-muted mb-3">256-entry static lookup table for PostgreSQL placeholders ($1, $2, ...).</p>
          <app-code-block [code]="placeholderExample" language="rust" />
        </div>
        <div class="p-4 rounded-lg bg-surface border border-border">
          <h3 class="font-semibold mb-2">SQL Template Cache</h3>
          <p class="text-sm text-muted mb-3">LRU cache for compiled SQL strings with ~34ns lookup time.</p>
          <app-code-block [code]="cacheExample" language="rust" />
        </div>
        <div class="p-4 rounded-lg bg-surface border border-border">
          <h3 class="font-semibold mb-2">Compile-time Filter Macros</h3>
          <p class="text-sm text-muted mb-3">Zero-cost filter construction at compile time.</p>
          <app-code-block [code]="macroExample" language="rust" />
        </div>
      </div>
    </section>

    <!-- Why Prax is Fast -->
    <section>
      <h2 class="text-2xl font-semibold mb-6">Why Prax is Fast</h2>
      <div class="grid md:grid-cols-2 gap-4">
        <div class="p-4 rounded-lg bg-surface border border-border">
          <div class="flex items-start gap-3">
            <div class="w-8 h-8 rounded-lg bg-success-500/10 flex items-center justify-center flex-shrink-0">
              <svg class="w-4 h-4 text-success-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
              </svg>
            </div>
            <div>
              <h3 class="font-semibold mb-1">Cache-Friendly Layout</h3>
              <p class="text-sm text-muted">Filter enum fits in a single 64-byte cache line.</p>
            </div>
          </div>
        </div>
        <div class="p-4 rounded-lg bg-surface border border-border">
          <div class="flex items-start gap-3">
            <div class="w-8 h-8 rounded-lg bg-success-500/10 flex items-center justify-center flex-shrink-0">
              <svg class="w-4 h-4 text-success-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
              </svg>
            </div>
            <div>
              <h3 class="font-semibold mb-1">Zero Allocation Paths</h3>
              <p class="text-sm text-muted">Static field names and pre-computed values avoid heap allocation.</p>
            </div>
          </div>
        </div>
        <div class="p-4 rounded-lg bg-surface border border-border">
          <div class="flex items-start gap-3">
            <div class="w-8 h-8 rounded-lg bg-success-500/10 flex items-center justify-center flex-shrink-0">
              <svg class="w-4 h-4 text-success-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
              </svg>
            </div>
            <div>
              <h3 class="font-semibold mb-1">Aggressive Inlining</h3>
              <p class="text-sm text-muted">#[inline(always)] on hot paths ensures zero function call overhead.</p>
            </div>
          </div>
        </div>
        <div class="p-4 rounded-lg bg-surface border border-border">
          <div class="flex items-start gap-3">
            <div class="w-8 h-8 rounded-lg bg-success-500/10 flex items-center justify-center flex-shrink-0">
              <svg class="w-4 h-4 text-success-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
              </svg>
            </div>
            <div>
              <h3 class="font-semibold mb-1">Fast SQL Building</h3>
              <p class="text-sm text-muted">Single-buffer construction with pre-allocated capacity.</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- vs Diesel -->
    <section>
      <h2 class="text-2xl font-semibold mb-6">Prax vs Diesel</h2>
      <div class="grid md:grid-cols-2 gap-6">
        <div class="p-6 rounded-xl bg-surface border border-success-500/30">
          <h3 class="font-semibold text-success-400 mb-4">Where Prax Wins</h3>
          <ul class="space-y-2 text-sm">
            <li class="flex items-start gap-2">
              <span class="text-success-400">✓</span>
              <span>6-7x faster SQL string construction</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-success-400">✓</span>
              <span>3x faster simple filter creation (1.7ns vs 5ns)</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-success-400">✓</span>
              <span>Runtime flexibility with Prisma-like API</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-success-400">✓</span>
              <span>Dynamic queries without BoxableExpression</span>
            </li>
          </ul>
        </div>
        <div class="p-6 rounded-xl bg-surface border border-warning-500/30">
          <h3 class="font-semibold text-warning-400 mb-4">Where Diesel Wins</h3>
          <ul class="space-y-2 text-sm">
            <li class="flex items-start gap-2">
              <span class="text-warning-400">•</span>
              <span>Complex filter composition (~5ns vs ~17ns for AND(5))</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-warning-400">•</span>
              <span>Large IN clauses (~100ns vs ~300ns)</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-warning-400">•</span>
              <span>Zero-cost abstractions via type system</span>
            </li>
          </ul>
        </div>
      </div>
    </section>
  </div>
</article>

